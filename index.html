<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=itim&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Cairo&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Hind&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">/>

    <title>Book Search</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f8f8;
        }

        #searchContainer {
            max-width: 600px;
            margin: 50px auto 0;
            background-color: #fff;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            text-align: center;
        }

        label {
            display: block;
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
font-family: 'Orbitron', sans-serif;
  font-weight: 1000;
  color: #a9b8c9;
        }

        input {
            width: calc(70% - 5px);
            padding: 10px;
            font-size: 14px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 16px;
            box-sizing: border-box;
            display: inline-block;
background-color: #eee;
  border: none;
  font-family: 'Orbitron', sans-serif, 'Cairo';
  font-weight: 600;
  color: #a9b8c9;
        }

        button {
            width: calc(30% - 5px);
            background-color: #4caf50;
            color: #fff;
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: inline-block;
font-family: 'Orbitron', sans-serif;
        }

        button:hover {
            background-color: #45a049;
        }

        #loadingSpinner {
            display: none;
            font-size: 20px;
            margin-top: 10px;
        }

        .suggestions {
            list-style: none;
            padding: 0;
            cursor: pointer;
            max-height: 120px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 0;
            padding: 0;
            font-family: 'Orbitron', sans-serif, 'Cairo';
        }

        .suggestions li {
            padding: 10px;
            font-family: 'Orbitron', sans-serif, 'Cairo';
            border-bottom: 1px solid #ddd;
            background-color: #f9f9f9;
            transition: background-color 0.3s;
        }

        .suggestions li:hover {
            background-color: #e3e3e3;
        }

        .bookInfo {
            margin: 20px 0;
            font-size: 20px;
        }

        .pagination {
            display: flex;
            list-style: none;
            padding: 0;
            justify-content: flex-start;
            margin-top: 20px;
            max-width: 100%;
            overflow-x: auto;
        }

        .pagination li {
            margin-right: 5px;
            cursor: pointer;
            background-color: #4caf50;
            color: #fff;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        .pagination li:hover {
            background-color: #45a049;
        }

        .pagination li.active {
            background-color: #45a049;
            font-weight: bold;
        }

        .bookInfo {
            margin: 20px 0;
            text-align: center;
            font-family: 'itim', 'Cairo';
            font-weight: 100;
        }

        .bookInfo h2 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }

        .bookInfo p {
            margin: 10px 0;
            font-size: 16px;
            color: #555;
        }

        .bookInfo img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .bookInfo a {
            color: #007BFF;
            text-decoration: none;
        }

        .bookInfo a:hover {
            text-decoration: underline;
        }
    </style>
    <style>
        

        #navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: white;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 3;
            
        }

        #menuToggle {
            cursor: pointer;
            transition: transform 0.3s;
            padding: 7px;
            width: 20px;
            height: 20px;
            box-sizing: content-box;
        }

        #menuIcon {
            font-size: 24px;
            color: #1976D2;
        }

        #menuIcon.close {
            transform: rotate(180deg);
        }

        #menuOverlay {
            position: fixed;
            top: 0px;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 2;
            overflow-y: auto;
        }

        #repoList {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 0;
            max-width: 800px;
            margin: 60px auto auto;
        }

        .repoCard {
            background-color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 10px;
            padding: 20px;
            width: 95%;
            border-radius: 8px;
            transition: box-shadow 0.3s;
            cursor: pointer;
        }

        .repoCard:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .repoTitle {
            font-size: 1.5rem;
            color: #1976D2;
            margin-bottom: 10px;
        }

        .repoDescription {
            color: #555;
            margin-bottom: 15px;
        }

        .repoLink {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            margin-top: 15px;
        }

        .repoLink a {
            color: white;
            text-decoration: none;
            background-color: #1976D2;
            padding: 10px 15px;
            border-radius: 5px;
            display: inline-block;
            transition: background-color 0.3s;
        }

        .repoLink a:hover {
            background-color: #1565C0;
        }

        .repoLink i {
            margin-left: 5px;
        }

        .center {
            color: white;
            text-decoration: none;
            background-color: #1976D2;
            padding: 10px 15px;
            border-radius: 5px;
            display: inline-block;
            transition: background-color 0.3s;
            margin: 10px;
        }
    </style>
     <style>
        /* ... (Your existing styles remain unchanged) ... */

        hr {
            height: 5px;
            background-color: #f8f8f8;
            margin: 10px 0;
        }

        #goodreads-widget {
            font-family: georgia, serif;
            padding: 18px 0;
            width: 575px;
        }

        #goodreads-widget h1 {
            font-weight: normal;
            font-size: 16px;
            border-bottom: 1px solid #BBB596;
            margin-bottom: 0;
        }

        #goodreads-widget a {
            text-decoration: none;
            color: #660;
        }

        iframe {
            background-color: #ffffff;
            border: none;
            width: 575px;
            height: 400px;
            margin: 10px 0;
        }

        #goodreads-widget a:hover {
            text-decoration: underline;
        }

        #goodreads-widget a:active {
            color: #660;
        }

        #gr_footer {
            width: 100%;
            border-top: 1px solid #BBB596;
            text-align: right;
        }

        #goodreads-widget .gr_branding {
            color: #382110;
            font-size: 11px;
            text-decoration: none;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        }
    </style>

</head>
<body>
  <div id="navbar">
    <div id="menuToggle" onclick="toggleMenu()">
      <i id="menuIcon" class="fas fa-bars"></i>
    </div>
  </div>

  <div id="menuOverlay" onclick="toggleMenu()">
    <div id="repoList"></div>
  </div>
<div id="searchContainer">
     <label for="bookQuery" style="
    font-size: 39px;
    display: block;
    text-shadow: -7px 3px 10px #4CAF50;
    letter-spacing: 0.02em;
    text-align: center;
    color: #4CAF50;
    text-shadow: 5px 5px 0px #8BC34A,
        2px 2px 0px #4CAF50,
        4px 4px 0px #FFEB3B,
        ;
    ">
    Book Search
     </label>
    <input type="text" id="bookQuery" placeholder="E.g., The Lord of the Rings" oninput="showSuggestions()">
    <button onclick="searchBook()">Search</button>
    
    <br ></br>
    <ul class="suggestions" id="suggestions"></ul>
    <span id="loadingSpinner" style="font-family: 'Orbitron', sans-serif;font-size: 39px;
    text-shadow: -7px 3px 10px #4CAF50;
    letter-spacing: 0.02em;
    text-align: center;
    color: #4CAF50;
    text-shadow: 5px 5px 0px #8BC34A,
        2px 2px 0px #4CAF50,
        4px 4px 0px #FFEB3B,
        ;">Loading...</span>
    <div id="bookData" class="bookInfo"></div>
    <ul class="pagination" id="pagination"></ul>
</div>



<script>
    // Function to fetch suggestions from Google Books API
    function fetchGoogleBooksSuggestions(query) {
        const script = document.createElement('script');
        script.src = `https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}&callback=handleGoogleBooksResponse`;
        document.body.appendChild(script);
    }

    // Callback function to handle Google Books API response
    function handleGoogleBooksResponse(response) {
        const suggestionsDiv = document.getElementById('suggestions');

        // Clear existing suggestions
        suggestionsDiv.innerHTML = '';

        // Display suggestions
        if (response.items && response.items.length > 0) {
            response.items.forEach(item => {
                const title = item.volumeInfo.title;

                const li = document.createElement('li');
                li.textContent = title;
                li.addEventListener('click', () => {
                    document.getElementById('bookQuery').value = title;
                    suggestionsDiv.innerHTML = '';
                });
                suggestionsDiv.appendChild(li);

                // If Google results are found, hide pagination
                document.getElementById('pagination').style.display = 'none';
            });
        } else {
            // If no Google results, show pagination
            document.getElementById('pagination').style.display = 'flex';
        }
    }

    // Function to fetch suggestions while typing
    function showSuggestions() {
        const query = document.getElementById('bookQuery').value;

        // Clear existing suggestions
        document.getElementById('suggestions').innerHTML = '';

        // Fetch and display suggestions
        if (query.trim() !== '') {
            fetchGoogleBooksSuggestions(query);
        }
    }

    // Function to fetch data from Open Library API
    function fetchOpenLibraryData(query, page = 1) {
        return fetch(`https://openlibrary.org/search.json?q=${query}&page=${page}&limit=10`)
            .then(response => response.json())
            .catch(error => {
                console.error('Error fetching Open Library data:', error);
                throw error;
            });
    }

    // Function to fetch data from both Open Library and Google Books APIs
    async function fetchData(query, page = 1) {
        // Hide suggestions
        document.getElementById('suggestions').innerHTML = '';

        // Show loading spinner
        document.getElementById('loadingSpinner').style.display = 'inline';

        // Clear existing data
        document.getElementById('bookData').innerHTML = '';
        document.getElementById('pagination').innerHTML = ''; // Clear existing pagination

        try {
            // Fetch data from Open Library
            const openLibraryData = await fetchOpenLibraryData(query, page);

            // Check if there are any works in the Open Library response
            if (openLibraryData.docs && openLibraryData.docs.length > 0) {
                // Process the Open Library data and update the HTML content
                displayBookData(openLibraryData);

                // Add pagination if more than 10 results
                if (openLibraryData.numFound > 10) {
                    displayPagination(openLibraryData, page);
                }
            } else {
                // If no results from Open Library, try fetching data from Google Books API
                fetchGoogleBooksSuggestions(query);
                fetchGoogleBooksData(query);
            }
        } catch (error) {
            // Handle errors from Open Library API
            document.getElementById('bookData').innerHTML = '<p>Error fetching data. Please try again later.</p>';
        } finally {
            // Hide loading spinner after data is loaded
            document.getElementById('loadingSpinner').style.display = 'none';
        }
    }

    // Function to fetch data from Google Books API
    function fetchGoogleBooksData(query) {
        fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(data => {
                // Process the Google Books data and update the HTML content
                displayGoogleBooksData(data);
            })
            .catch(error => {
                console.error('Error fetching Google Books data:', error);
                document.getElementById('bookData').innerHTML = '<p>Error fetching data from Google Books. Please try again later.</p>';
            });
    }

    // Function to display Google Books data in HTML
    function displayGoogleBooksData(data) {
        const bookDataDiv = document.getElementById('bookData');

        // Check if there are any items in the response
        if (data.items && data.items.length > 0) {
            // Process and display information for each book
            data.items.forEach(item => {
                const title = item.volumeInfo.title;
                const coverImageURL = item.volumeInfo.imageLinks ? item.volumeInfo.imageLinks.thumbnail : '';
                const rating = item.volumeInfo.averageRating ? item.volumeInfo.averageRating : 'Not rated';
                const description = item.volumeInfo.description ? item.volumeInfo.description : 'No description available';
                const pageCount = item.volumeInfo.pageCount || 'Not available';
                const authors = item.volumeInfo.authors ? item.volumeInfo.authors.join(', ') : 'Unknown Author';
                const categories = item.volumeInfo.categories ? item.volumeInfo.categories.join(', ') : 'Not available';
                const publishedDate = item.volumeInfo.publishedDate || 'Not available';
                const language = item.volumeInfo.language || 'Not available';
                const previewLink = item.volumeInfo.previewLink || '#';

                // Check if any data is '0', 'Not available', or 'Unknown', and exclude those lines
                const bookInfo = `
                    <h2>${title}</h2>
                    <img src="${coverImageURL}" alt="Book Cover" style="max-width: 200px; max-height: 300px;">
                    <p>Rating:</p> ${rating} 
                    <p>Description: <br> ${description}</p>
                    <p>Page Count: ${pageCount}</p>
                    <p>Authors: ${authors}</p>
                    <p>Categories: ${categories}</p>
                    <p>Published Date: ${publishedDate}</p>
                    <p>Language: ${language}</p>
                    <a href="${previewLink}" target="_blank">Preview Link</a>
                `;

                // Append the book info to the HTML content
                bookDataDiv.innerHTML += bookInfo;


// Display Goodreads widget for each book
            bookDataDiv.innerHTML += `
              <br>
<a  target="_blank" rel="nofollow noopener noreferrer" href="https://www.goodreads.com/search?q=${title}">Reviews from Goodreads.com</a>
                
            `;



                bookDataDiv.innerHTML += `<hr style="height: 5px; background-color: #f8f8f8; margin: 0;border: none;">`;
            });
        } else {
            // Display a message if no results are found from Google Books
            bookDataDiv.innerHTML = '<p>No results found from Google Books.</p>';
        }
    }

// Function to display book data in HTML with Goodreads integration
    async function displayBookData(data) {
        const bookDataDiv = document.getElementById('bookData');

        // Keep track of displayed titles to avoid duplicates
        const displayedTitles = new Set();

        // Display information for each book in the results
        for (const book of data.docs) {
            const title = book.title;

            // Skip displaying if the title is already in the set
            if (displayedTitles.has(title)) {
                continue;
            }

            displayedTitles.add(title);

            const ratingsAverage = book.ratings_average || 'Not available';
            const coverEditionKey = book.cover_edition_key || 'Not available';
            const coverImageURL = `https://covers.openlibrary.org/b/olid/${coverEditionKey}-M.jpg`; // Construct cover image URL
            const editionCount = book.edition_count || 'Not available';
            const authorName = book.author_name ? book.author_name.join(', ') : 'Unknown Author';
            const subject = book.subject ? book.subject.join(', ') : 'Not available';
            const person = book.person ? book.person.join(', ') : 'Not available';
            const place = book.place ? book.place.join(', ') : 'Not available';
            const time = book.time ? book.time.join(', ') : 'Not available';
            const hasFullText = book.has_fulltext || false;
            const titleSuggest = book.title_suggest || 'Not available';
            const publishYear = book.publish_year ? book.publish_year[0] : 'Unknown';
            const language = book.language ? book.language[0] : 'Unknown';
            const numberOfPagesMedian = book.number_of_pages_median || 'Not available';
            const firstPublishYear = book.first_publish_year || 'Unknown';

            // Fetch data from Google Books API for the Preview Link
            const googleBooksData = await fetchGoogleBooksDataByTitle(title);

            // Extract Preview Link from Google Books API response
            const previewLink = googleBooksData?.items?.[0]?.volumeInfo?.previewLink || '#';

            // Check if any data is '0', 'Not available', or 'Unknown', and exclude those lines
            const bookInfo = `
                <h2>${title}</h2>
                
                <img src="${coverImageURL}" alt="Book Cover" style="max-width: 200px; max-height: 300px;">
                <p>Ratings Average:</p> ${ratingsAverage}
                <p>Edition Count: ${editionCount}</p>
                <p>Author: ${authorName}</p>
                <p>Subject: ${subject}</p>
                <p>Person: ${person}</p>
                <p>Place: ${place}</p>
                <p>Time: ${time}</p>
                <p>Has Full Text: ${hasFullText}</p>
                <p>Title Suggest: ${titleSuggest}</p>
                <p>Publish Year: ${publishYear}</p>
                <p>Language: ${language}</p>
                <p>Number of Pages Median: ${numberOfPagesMedian}</p>
                <p>First Publish Year: ${firstPublishYear}</p>
                <p>Preview Link: <a href="${previewLink}" target="_blank">Google Books</a></p>
            `;

            // Append the book info to the HTML content
            bookDataDiv.innerHTML += bookInfo;
            

            // Display Goodreads widget below each book
            bookDataDiv.innerHTML += `
                <div id="goodreads-widget">
                    <div id="gr_header">
                        <h1><a rel="nofollow">Goodreads reviews for ${title}</a></h1>
                    </div>
                    <iframe sandbox id="the_iframe" src="https://www.goodreads.com/api/reviews_widget_iframe?did=DEVELOPER_ID&format=html&header_text=Goodreads+reviews+for+${title}&isbn=${book.id_goodreads}&links=660&min_rating=1&num_reviews=10&review_back=ffffff&stars=000000&stylesheet=&text=444" width="auto" height="400" frameborder="0"></iframe>
                    <div id="gr_footer">
                        <a class="gr_branding" target="_blank" rel="nofollow noopener noreferrer" href="https://www.goodreads.com/search?q=${encodeURIComponent(title)}">Reviews from Goodreads.com</a>
                    </div>
                </div>
            `;
       
            bookDataDiv.innerHTML += `<hr style="height: 5px; background-color: #f8f8f8; margin: 0;border: none;">`;
        }
    }

    // Function to fetch data from Google Books API by book title
    function fetchGoogleBooksDataByTitle(title) {
        return fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(title)}&maxResults=1`)
            .then(response => response.json())
            .catch(error => {
                console.error('Error fetching Google Books data by title:', error);
                return null;
            });
    }

    // Function to display pagination
function displayPagination(data, currentPage) {
    const paginationDiv = document.getElementById('pagination');

    // Show pagination only if there are more than 10 results
    if (data.numFound > 10) {
        paginationDiv.style.display = 'flex';

        const totalPages = Math.ceil(data.numFound / 10); // Assuming 10 results per page

        // Clear existing pagination
        paginationDiv.innerHTML = '';

        for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            li.textContent = i;
            li.addEventListener('click', () => {
                fetchData(document.getElementById('bookQuery').value, i);
                // Show suggestions when pagination is clicked
                showSuggestions();
            });

            if (i === currentPage) {
                li.style.fontWeight = 'bold';
            }

            paginationDiv.appendChild(li);
        }
    } else {
        // If there are 10 or fewer results, hide pagination
        paginationDiv.style.display = 'none';
    }
}


    // Function to trigger the search based on user input
function searchBook() {
    const bookQuery = document.getElementById('bookQuery').value;

    // Show suggestions
    showSuggestions();

    // Fetch data
    fetchData(bookQuery);
}

</script>
    <script>
    const currentPageLocation = window.location.href;
    let displayedRepos = 0; // Counter for displayed repositories

    // Fetch data from GitHub API
    fetch('https://api.github.com/users/hoodaatwa/repos')
      .then(response => response.json())
      .then(data => {
        // Create Material-UI card for each repository
        const repoList = document.getElementById('repoList');
        data.forEach(repo => {
          if (displayedRepos >= 4 || repo.homepage === currentPageLocation) {
            // Skip creating card if reached the limit or homepage matches current page location
            return;
          }

          const repoCard = document.createElement('div');
          repoCard.classList.add('repoCard');
          repoCard.innerHTML = `
            <div class="repoTitle">${repo.name}</div>
            <div class="repoDescription">${repo.description}</div>
            <div class="repoLink">
              <a href="${repo.homepage}" target="_blank">Homepage <i class="fas fa-external-link-alt"></i></a>
            </div>
          `;
          repoList.appendChild(repoCard);

          displayedRepos++;
        });

        // Find the "Main" repository and create a special card with a dynamic link
        const mainRepo = data.find(repo => repo.name.toLowerCase() === 'main');
        if (mainRepo) {
          const mainRepoCard = document.createElement('div');

          mainRepoCard.innerHTML = `
            <a class="center" href="${mainRepo.homepage}" target="_blank">Go to Main Page <i class="fas fa-external-link-alt"></i></a>
          `;
          repoList.appendChild(mainRepoCard);
        }
      })
      .catch(error => console.error('Error fetching data:', error));

    function toggleMenu() {
      const menuOverlay = document.getElementById('menuOverlay');
      const body = document.body;
      const menuIcon = document.getElementById('menuIcon');

      if (menuOverlay.style.display === 'block') {
        menuOverlay.style.display = 'none';
        body.style.overflow = 'auto';
        menuIcon.classList.replace('fa-times', 'fa-bars');
      } else {
        menuOverlay.style.display = 'block';
        body.style.overflow = 'hidden';
        menuIcon.classList.replace('fa-bars', 'fa-times');
      }
    }
  </script>



</body>
    </html>
